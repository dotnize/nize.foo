---
import NavLink from "./NavLink.astro";
import ThemeToggle from "./ThemeToggle";
import IconDocument from "./icons/IconDocument.astro";
import IconEmail from "./icons/IconEmail.astro";
import IconHome from "./icons/IconHome.astro";
---

<header
  class="border-gruvbox-bg1 bg-gruvbox-bg1 dark:border-gruvboxDark-bg dark:bg-gruvboxDark-bgXH sticky top-0 z-50 flex items-center justify-between rounded-t border border-b-0 px-3 transition-[top] duration-200"
>
  <div class="flex items-center gap-3 pt-1">
    <div class="flex gap-2">
      <div class="bg-gruvbox-yellow dark:bg-gruvboxDark-yellow2 size-1.5 rounded-xs"></div>
      <div class="bg-gruvbox-green dark:bg-gruvboxDark-green2 size-1.5 rounded-xs"></div>
      <div class="bg-gruvbox-red dark:bg-gruvboxDark-red2 size-1.5 rounded-xs"></div>
    </div>
    <nav class="font-azeret text-sm">
      <ul class="flex h-full gap-1">
        <NavLink href="/">
          <IconHome class="size-4" />

          <span class="sr-only sm:not-sr-only">Home</span>
        </NavLink>

        <NavLink href="/blog/">
          <IconDocument class="size-4" />

          <span class="sr-only sm:not-sr-only">Blog</span>
        </NavLink>

        <NavLink href="/contact/">
          <IconEmail class="size-4" />

          <span class="sr-only sm:not-sr-only">Contact</span>
        </NavLink>
      </ul>
    </nav>
  </div>
  <ThemeToggle client:only="solid-js" transition:persist />
</header>

<script>
  let prevScrollPos = window.scrollY;
  window.addEventListener("scroll", () => {
    let currentScrollPos = window.scrollY;

    const header = document.querySelector("header");
    if (header) {
      if (prevScrollPos > currentScrollPos) {
        header.classList.replace("-top-10", "top-0");
      } else if (currentScrollPos > 192.0) {
        header.classList.replace("top-0", "-top-10");
      }
    }

    prevScrollPos = currentScrollPos;
  });
</script>
